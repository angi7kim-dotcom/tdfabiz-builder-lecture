<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ìœ ë‹ˆí¼ ìŠ¤íƒ€ì¼ ì¶”ì²œê¸° | TOFABIZ</title>
    <meta name="description" content="ì—…ì¢… ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´ AIê°€ ë§ì¶¤ ìœ ë‹ˆí¼ ìŠ¤íƒ€ì¼ì„ ì¦‰ì‹œ ì¶”ì²œí•©ë‹ˆë‹¤." />
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.css" />

    <!-- Teachable Machine -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.22.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

    <style>
        :root {
            --bg: #070a10;
            --bg2: #0b0f17;
            --card: rgba(255, 255, 255, .06);
            --line: rgba(255, 255, 255, .12);
            --text: rgba(255, 255, 255, .92);
            --muted: rgba(255, 255, 255, .60);
            --gold: #d7b46a;
            --gold2: #f0d79a;
            --accent: #7ee7ff;
            --green: #4ade80;
            --radius: 18px;
            --max: 860px;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
        }

        body {
            font-family: "Pretendard Variable", Pretendard, system-ui, sans-serif;
            background: radial-gradient(900px 500px at 80% -5%, rgba(215, 180, 106, .22), transparent 60%),
                radial-gradient(700px 400px at 10% 10%, rgba(126, 231, 255, .14), transparent 60%),
                linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
            color: var(--text);
            min-height: 100vh;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        .wrap {
            width: min(var(--max), calc(100% - 40px));
            margin: 0 auto;
            padding: 48px 0 80px;
        }

        /* Header */
        .back {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--muted);
            font-size: 14px;
            padding: 8px 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, .10);
            background: rgba(255, 255, 255, .04);
            margin-bottom: 36px;
            transition: .2s;
        }

        .back:hover {
            color: var(--text);
            background: rgba(255, 255, 255, .08);
        }

        .hero-tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            border: 1px solid rgba(126, 231, 255, .3);
            background: rgba(126, 231, 255, .06);
            color: var(--accent);
            font-size: 12px;
            margin-bottom: 14px;
        }

        h1 {
            font-size: clamp(26px, 4vw, 38px);
            line-height: 1.15;
            letter-spacing: -.4px;
            margin-bottom: 12px;
        }

        h1 span {
            color: var(--gold2);
        }

        .sub {
            color: var(--muted);
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        /* Upload Zone */
        .upload-zone {
            border: 2px dashed rgba(255, 255, 255, .18);
            border-radius: var(--radius);
            background: rgba(255, 255, 255, .03);
            padding: 48px 24px;
            text-align: center;
            cursor: pointer;
            transition: .25s ease;
            position: relative;
        }

        .upload-zone:hover,
        .upload-zone.drag {
            border-color: rgba(215, 180, 106, .5);
            background: rgba(215, 180, 106, .04);
        }

        .upload-zone input {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }

        .upload-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            margin: 0 auto 16px;
            background: radial-gradient(circle at 30% 30%, rgba(240, 215, 154, .9), rgba(215, 180, 106, .1) 60%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .upload-zone h3 {
            font-size: 17px;
            margin-bottom: 6px;
        }

        .upload-zone p {
            color: var(--muted);
            font-size: 14px;
        }

        /* Or Divider */
        .divider {
            display: flex;
            align-items: center;
            gap: 14px;
            margin: 22px 0;
            color: var(--muted);
            font-size: 13px;
        }

        .divider::before,
        .divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background: rgba(255, 255, 255, .10);
        }

        /* Category Quick Pick */
        .quick-label {
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 12px;
        }

        .quick-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 32px;
        }

        .quick-btn {
            padding: 14px 8px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, .12);
            background: rgba(255, 255, 255, .04);
            cursor: pointer;
            text-align: center;
            transition: .2s;
            color: var(--text);
            font-size: 13px;
        }

        .quick-btn .emoji {
            font-size: 24px;
            display: block;
            margin-bottom: 6px;
        }

        .quick-btn:hover {
            border-color: rgba(215, 180, 106, .4);
            background: rgba(215, 180, 106, .06);
            transform: translateY(-2px);
        }

        .quick-btn.active {
            border-color: var(--gold);
            background: rgba(215, 180, 106, .12);
        }

        /* Image Preview */
        #preview-wrap {
            display: none;
            position: relative;
            margin-bottom: 24px;
        }

        #preview-img {
            width: 100%;
            max-height: 280px;
            object-fit: cover;
            border-radius: var(--radius);
            border: 1px solid rgba(255, 255, 255, .12);
            display: block;
        }

        .preview-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(0, 0, 0, .6);
            border: 1px solid rgba(255, 255, 255, .2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            color: var(--text);
        }

        /* Analyze Button */
        .btn-analyze {
            width: 100%;
            padding: 16px;
            border-radius: 14px;
            border: 1px solid rgba(215, 180, 106, .5);
            background: radial-gradient(120% 160% at 20% 20%, rgba(240, 215, 154, .3), transparent 55%),
                linear-gradient(135deg, rgba(215, 180, 106, .2), rgba(255, 255, 255, .04));
            color: var(--text);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: .22s;
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-analyze:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 60px rgba(215, 180, 106, .18);
        }

        .btn-analyze.visible {
            display: flex;
        }

        /* Loading */
        #loading {
            display: none;
            text-align: center;
            padding: 48px 0;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, .1);
            border-top-color: var(--gold);
            animation: spin .9s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-text {
            color: var(--muted);
            font-size: 14px;
        }

        .loading-steps {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 16px;
            max-width: 240px;
            margin-inline: auto;
        }

        .loading-step {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
            color: var(--muted);
            text-align: left;
        }

        .loading-step .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, .2);
            flex: 0 0 auto;
        }

        .loading-step.done .dot {
            background: var(--green);
        }

        .loading-step.active .dot {
            background: var(--gold);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: .4;
            }
        }

        /* Result */
        #result {
            display: none;
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 20px;
            border-radius: var(--radius);
            border: 1px solid rgba(78, 222, 128, .3);
            background: rgba(78, 222, 128, .06);
            margin-bottom: 24px;
        }

        .result-badge {
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 600;
            background: rgba(78, 222, 128, .18);
            color: var(--green);
            border: 1px solid rgba(78, 222, 128, .3);
        }

        .confidence-bar {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, .1);
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 3px;
            background: linear-gradient(90deg, var(--green), var(--accent));
            transition: width 1.2s ease;
        }

        .rec-card {
            border-radius: var(--radius);
            border: 1px solid rgba(255, 255, 255, .12);
            background: rgba(255, 255, 255, .04);
            overflow: hidden;
            margin-bottom: 14px;
        }

        .rec-header {
            padding: 14px 18px;
            border-bottom: 1px solid rgba(255, 255, 255, .08);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .rec-icon {
            font-size: 20px;
        }

        .rec-header h3 {
            font-size: 15px;
        }

        .rec-body {
            padding: 14px 18px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .rec-item {
            padding: 10px 12px;
            border-radius: 12px;
            background: rgba(0, 0, 0, .18);
            border: 1px solid rgba(255, 255, 255, .08);
        }

        .rec-item label {
            display: block;
            font-size: 11px;
            color: var(--muted);
            margin-bottom: 4px;
        }

        .rec-item span {
            font-size: 13px;
            line-height: 1.4;
        }

        .color-dots {
            display: flex;
            gap: 6px;
            margin-top: 4px;
        }

        .color-dot {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, .15);
        }

        /* CTA Form */
        .cta-form {
            padding: 24px;
            border-radius: var(--radius);
            border: 1px solid rgba(215, 180, 106, .3);
            background: radial-gradient(120% 160% at 10% 10%, rgba(215, 180, 106, .1), transparent 55%), rgba(255, 255, 255, .03);
            margin-top: 24px;
        }

        .cta-form h3 {
            font-size: 17px;
            margin-bottom: 6px;
        }

        .cta-form p {
            color: var(--muted);
            font-size: 14px;
            margin-bottom: 18px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        input,
        textarea {
            width: 100%;
            padding: 11px 12px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, .12);
            background: rgba(0, 0, 0, .22);
            color: var(--text);
            font-size: 14px;
            outline: none;
            font-family: inherit;
            transition: .2s;
        }

        input:focus,
        textarea:focus {
            border-color: rgba(215, 180, 106, .4);
            box-shadow: 0 0 0 3px rgba(215, 180, 106, .1);
        }

        textarea {
            min-height: 90px;
            resize: vertical;
            margin-bottom: 10px;
        }

        .btn-submit {
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            border: 1px solid rgba(215, 180, 106, .5);
            background: radial-gradient(120% 160% at 20% 20%, rgba(240, 215, 154, .28), transparent 55%),
                linear-gradient(135deg, rgba(215, 180, 106, .18), rgba(255, 255, 255, .03));
            color: var(--text);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: .2s;
        }

        .btn-submit:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 50px rgba(215, 180, 106, .16);
        }

        /* Reset */
        .btn-reset {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            margin-top: 12px;
            border: 1px solid rgba(255, 255, 255, .12);
            background: rgba(255, 255, 255, .04);
            color: var(--muted);
            font-size: 14px;
            cursor: pointer;
            transition: .2s;
        }

        .btn-reset:hover {
            color: var(--text);
            background: rgba(255, 255, 255, .08);
        }

        /* Notice */
        .notice {
            padding: 12px 14px;
            border-radius: 12px;
            margin-top: 32px;
            border: 1px solid rgba(126, 231, 255, .2);
            background: rgba(126, 231, 255, .04);
            color: rgba(126, 231, 255, .85);
            font-size: 12.5px;
            line-height: 1.6;
        }

        @media (max-width: 560px) {
            .quick-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .rec-body {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="wrap">

        <a class="back" href="index.html">â† TOFABIZ í™ˆìœ¼ë¡œ</a>

        <div class="hero-tag">
            <span>ğŸ¤–</span> AI Powered by Teachable Machine
        </div>
        <h1>ì—…ì¢… ì´ë¯¸ì§€ë¡œ<br /><span>ë§ì¶¤ ìœ ë‹ˆí¼</span> ì¦‰ì‹œ ì¶”ì²œ</h1>
        <p class="sub">
            ë§¤ì¥Â·ì‚¬ë¬´ì‹¤Â·í˜„ì¥ ì‚¬ì§„ì„ ì˜¬ë¦¬ë©´ AIê°€ ì—…ì¢…ì„ ì¸ì‹í•˜ê³ ,<br />
            ìµœì ì˜ ìœ ë‹ˆí¼ ìŠ¤íƒ€ì¼Â·ì†Œì¬Â·ì»¬ëŸ¬ë¥¼ ë°”ë¡œ ì œì•ˆí•©ë‹ˆë‹¤.
        </p>

        <!-- Upload Zone -->
        <div class="upload-zone" id="drop-zone">
            <input type="file" id="file-input" accept="image/*" />
            <div class="upload-icon">ğŸ“·</div>
            <h3>ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•´ì„œ ì—…ë¡œë“œ</h3>
            <p>JPG, PNG, WEBP Â· ìµœëŒ€ 10MB</p>
        </div>

        <div class="divider">ë˜ëŠ” ì—…ì¢…ì„ ì§ì ‘ ì„ íƒ</div>

        <p class="quick-label">ì—…ì¢…ì„ í´ë¦­í•˜ë©´ ë°”ë¡œ ì¶”ì²œ ê²°ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤</p>
        <div class="quick-grid">
            <button class="quick-btn" data-industry="restaurant" onclick="selectIndustry(this)">
                <span class="emoji">ğŸ½ï¸</span>ìš”ì‹ì—…
            </button>
            <button class="quick-btn" data-industry="medical" onclick="selectIndustry(this)">
                <span class="emoji">ğŸ¥</span>ì˜ë£ŒÂ·í—¬ìŠ¤ì¼€ì–´
            </button>
            <button class="quick-btn" data-industry="hotel" onclick="selectIndustry(this)">
                <span class="emoji">ğŸ¨</span>í˜¸í…”Â·ì„œë¹„ìŠ¤
            </button>
            <button class="quick-btn" data-industry="logistics" onclick="selectIndustry(this)">
                <span class="emoji">ğŸšš</span>ë¬¼ë¥˜Â·ì œì¡°
            </button>
        </div>

        <!-- Image Preview -->
        <div id="preview-wrap">
            <img id="preview-img" src="" alt="ì—…ë¡œë“œ ì´ë¯¸ì§€" />
            <button class="preview-remove" onclick="resetAll()">âœ•</button>
        </div>

        <button class="btn-analyze" id="btn-analyze" onclick="runAnalysis()">
            ğŸ” AI ë¶„ì„ ì‹œì‘í•˜ê¸°
        </button>

        <!-- Loading -->
        <div id="loading">
            <div class="spinner"></div>
            <p class="loading-text">AIê°€ ì´ë¯¸ì§€ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
            <div class="loading-steps">
                <div class="loading-step" id="step1">
                    <div class="dot"></div><span>ì´ë¯¸ì§€ ì „ì²˜ë¦¬</span>
                </div>
                <div class="loading-step" id="step2">
                    <div class="dot"></div><span>ì—…ì¢… íŒ¨í„´ ì¸ì‹</span>
                </div>
                <div class="loading-step" id="step3">
                    <div class="dot"></div><span>ìœ ë‹ˆí¼ DB ë§¤ì¹­</span>
                </div>
                <div class="loading-step" id="step4">
                    <div class="dot"></div><span>ì¶”ì²œ ë¦¬í¬íŠ¸ ìƒì„±</span>
                </div>
            </div>
        </div>

        <!-- Result -->
        <div id="result">
            <div class="result-header">
                <div>
                    <div style="font-size:12px; color:var(--muted); margin-bottom:4px;">ì¸ì‹ëœ ì—…ì¢…</div>
                    <div id="result-label" style="font-size:18px; font-weight:700;"></div>
                </div>
                <div class="result-badge" id="result-conf"></div>
                <div class="confidence-bar" style="margin-left:auto; width:120px;">
                    <div class="confidence-fill" id="conf-bar" style="width:0%"></div>
                </div>
            </div>

            <div id="rec-cards"></div>

            <!-- Formspree ê²¬ì  ì—°ê²° -->
            <div class="cta-form">
                <h3>ğŸ¯ ê²¬ì  ë°”ë¡œ ì‹ ì²­í•˜ê¸°</h3>
                <p id="cta-desc">AI ì¶”ì²œ ê²°ê³¼ë¥¼ í¬í•¨í•´ ê²¬ì ì„ ë°”ë¡œ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.</p>
                <form action="https://formspree.io/f/mvzblkby" method="POST">
                    <input type="hidden" name="_subject" value="[TOFABIZ] AI ì¶”ì²œ ê¸°ë°˜ ê²¬ì  ë¬¸ì˜" />
                    <input type="hidden" name="ai_recommendation" id="hidden-rec" value="" />
                    <div class="form-row">
                        <input name="company" placeholder="íšŒì‚¬/ê¸°ê´€ëª…" required />
                        <input name="name" placeholder="ë‹´ë‹¹ìëª…" required />
                    </div>
                    <div class="form-row">
                        <input name="phone" placeholder="ì—°ë½ì²˜" />
                        <input name="email" type="email" placeholder="ì´ë©”ì¼" required />
                    </div>
                    <textarea name="message" id="auto-message" placeholder="ë¬¸ì˜ ë‚´ìš©"></textarea>
                    <button class="btn-submit" type="submit">ê²¬ì  ì‹ ì²­í•˜ê¸° â†’</button>
                </form>
            </div>

            <button class="btn-reset" onclick="resetAll()">ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>
        </div>

        <!-- Developer Note -->
        <div class="notice">
            ğŸ’¡ <strong>ê°œë°œì ë…¸íŠ¸</strong> â€” í˜„ì¬ëŠ” ë°ëª¨ ëª¨ë“œì…ë‹ˆë‹¤. ì‹¤ì œ Teachable Machine ëª¨ë¸ì„ í•™ìŠµì‹œí‚¨ í›„
            ì•„ë˜ ì½”ë“œì˜ <code>MODEL_URL</code>ì„ êµì²´í•˜ë©´ ì‹¤ì œ ì´ë¯¸ì§€ ë¶„ë¥˜ê°€ ì‘ë™í•©ë‹ˆë‹¤.<br />
            í•™ìŠµ ë°©ë²•: <a href="https://teachablemachine.withgoogle.com/train/image" target="_blank"
                style="color:var(--accent);">teachablemachine.withgoogle.com â†’</a>
        </div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // Teachable Machine ëª¨ë¸ URL (í•™ìŠµ í›„ êµì²´)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const MODEL_URL = null; // ì˜ˆ: "https://teachablemachine.withgoogle.com/models/xxxxxxxx/"
        let tmModel = null;
        let selectedIndustry = null;
        let imageSelected = false;

        // ì—…ì¢…ë³„ ì¶”ì²œ ë°ì´í„°
        const RECOMMENDATIONS = {
            restaurant: {
                label: "ğŸ½ï¸ ìš”ì‹ì—… / ì™¸ì‹ì—…",
                confidence: 94,
                items: [
                    { icon: "ğŸ‘•", title: "ì¶”ì²œ ìŠ¤íƒ€ì¼", label: "ê¸°ë³¸ ìŠ¤íƒ€ì¼", value: "ì•ì¹˜ë§ˆ ì„¸íŠ¸ + í´ë¡œ ì…”ì¸ <br/>ì¡°ë¦¬ë³µ / í™€ ìœ ë‹ˆí¼ ë¶„ë¦¬" },
                    { icon: "ğŸ§µ", title: "ì†Œì¬", label: "ê¶Œì¥ ì›ë‹¨", value: "í•­ê·  í´ë¦¬ì—ìŠ¤í„°<br/>ì˜¤ì—¼ ë°©ì§€ ê°€ê³µ (DWR)" },
                    { icon: "ğŸ¨", title: "ì»¬ëŸ¬ íŒ”ë ˆíŠ¸", label: "ì¶”ì²œ ìƒ‰ìƒ", value: "í™”ì´íŠ¸ Â· ë¸”ë™ Â· ë„¤ì´ë¹„", colors: ["#ffffff", "#1a1a1a", "#1e3a5f"] },
                    { icon: "â™»ï¸", title: "ê´€ë¦¬", label: "ì„¸íƒë Œíƒˆ ì£¼ê¸°", value: "ì£¼ 2íšŒ ìˆ˜ê±° ê¶Œì¥<br/>ì‚´ê·  ì„¸íƒ í•„ìˆ˜" },
                ]
            },
            medical: {
                label: "ğŸ¥ ì˜ë£Œ / í—¬ìŠ¤ì¼€ì–´",
                confidence: 97,
                items: [
                    { icon: "ğŸ‘—", title: "ì¶”ì²œ ìŠ¤íƒ€ì¼", label: "ê¸°ë³¸ ìŠ¤íƒ€ì¼", value: "ìŠ¤í¬ëŸ½ ì„¸íŠ¸ + ê°€ìš´<br/>ì§ì¢…ë³„ ì»¬ëŸ¬ ì½”ë“œ êµ¬ë¶„" },
                    { icon: "ğŸ§µ", title: "ì†Œì¬", label: "ê¶Œì¥ ì›ë‹¨", value: "í•­ê· Â·ë°©ìˆ˜ ê¸°ëŠ¥ì„± ì†Œì¬<br/>ì„¸íƒ ë‚´êµ¬ì„± 300íšŒ ì´ìƒ" },
                    { icon: "ğŸ¨", title: "ì»¬ëŸ¬ íŒ”ë ˆíŠ¸", label: "ì¶”ì²œ ìƒ‰ìƒ", value: "í™”ì´íŠ¸ Â· í•˜ëŠ˜ìƒ‰ Â· ë¯¼íŠ¸", colors: ["#ffffff", "#87ceeb", "#98d8c8"] },
                    { icon: "â™»ï¸", title: "ê´€ë¦¬", label: "ì„¸íƒë Œíƒˆ ì£¼ê¸°", value: "ë§¤ì¼ ìˆ˜ê±° ê¶Œì¥<br/>ê³ ì˜¨ ì‚´ê·  í•„ìˆ˜" },
                ]
            },
            hotel: {
                label: "ğŸ¨ í˜¸í…” / ì„œë¹„ìŠ¤ì—…",
                confidence: 91,
                items: [
                    { icon: "ğŸ’¼", title: "ì¶”ì²œ ìŠ¤íƒ€ì¼", label: "ê¸°ë³¸ ìŠ¤íƒ€ì¼", value: "ì •ì¥í˜• ìœ ë‹ˆí¼<br/>ë¶€ì„œë³„ ì°¨ë³„í™” ë””ìì¸" },
                    { icon: "ğŸ§µ", title: "ì†Œì¬", label: "ê¶Œì¥ ì›ë‹¨", value: "ê³ ê¸‰ í˜¼ë°© (T/R, T/W)<br/>ì£¼ë¦„ ë°©ì§€Â·í˜•íƒœ ì•ˆì •ì„±" },
                    { icon: "ğŸ¨", title: "ì»¬ëŸ¬ íŒ”ë ˆíŠ¸", label: "ì¶”ì²œ ìƒ‰ìƒ", value: "ë„¤ì´ë¹„ Â· ë²„ê±´ë”” Â· ë¸”ë™", colors: ["#1e3a5f", "#722f37", "#1a1a1a"] },
                    { icon: "â™»ï¸", title: "ê´€ë¦¬", label: "ì„¸íƒë Œíƒˆ ì£¼ê¸°", value: "ì£¼ 3íšŒ ìˆ˜ê±° ê¶Œì¥<br/>ë“œë¼ì´í´ë¦¬ë‹ ì˜µì…˜" },
                ]
            },
            logistics: {
                label: "ğŸšš ë¬¼ë¥˜ / ì œì¡°Â·í˜„ì¥",
                confidence: 89,
                items: [
                    { icon: "ğŸ¦º", title: "ì¶”ì²œ ìŠ¤íƒ€ì¼", label: "ê¸°ë³¸ ìŠ¤íƒ€ì¼", value: "ì¹´ê³  ì‘ì—…ë³µ + ì¡°ë¼<br/>ë°˜ì‚¬ í…Œì´í”„ ì•ˆì „ ê¸°ëŠ¥" },
                    { icon: "ğŸ§µ", title: "ì†Œì¬", label: "ê¶Œì¥ ì›ë‹¨", value: "ë‚´êµ¬ì„± ë©´í˜¼ë°© (TC)<br/>ë°œìˆ˜Â·ë°©ì˜¤ ê°€ê³µ" },
                    { icon: "ğŸ¨", title: "ì»¬ëŸ¬ íŒ”ë ˆíŠ¸", label: "ì¶”ì²œ ìƒ‰ìƒ", value: "í˜•ê´‘ ì˜¤ë Œì§€ Â· ë„¤ì´ë¹„ Â· íšŒìƒ‰", colors: ["#ff6b00", "#1e3a5f", "#6b7280"] },
                    { icon: "â™»ï¸", title: "ê´€ë¦¬", label: "ì„¸íƒë Œíƒˆ ì£¼ê¸°", value: "ì£¼ 1~2íšŒ ìˆ˜ê±°<br/>ê°•ë ¥ ì„¸íƒ í”„ë¡œê·¸ë¨" },
                ]
            }
        };

        // íŒŒì¼ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬
        const fileInput = document.getElementById('file-input');
        const dropZone = document.getElementById('drop-zone');

        fileInput.addEventListener('change', e => {
            const file = e.target.files[0];
            if (file) showPreview(file);
        });

        dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag'));
        dropZone.addEventListener('drop', e => {
            e.preventDefault(); dropZone.classList.remove('drag');
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) showPreview(file);
        });

        function showPreview(file) {
            const reader = new FileReader();
            reader.onload = ev => {
                document.getElementById('preview-img').src = ev.target.result;
                document.getElementById('preview-wrap').style.display = 'block';
                dropZone.style.display = 'none';
                document.querySelector('.divider').style.display = 'none';
                document.querySelector('.quick-label').style.display = 'none';
                document.querySelector('.quick-grid').style.display = 'none';
                imageSelected = true;
                document.getElementById('btn-analyze').classList.add('visible');
            };
            reader.readAsDataURL(file);
        }

        function selectIndustry(btn) {
            document.querySelectorAll('.quick-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            selectedIndustry = btn.dataset.industry;
            // ì§ì ‘ ì„ íƒì€ ë°”ë¡œ ë¶„ì„
            runAnalysis();
        }

        async function runAnalysis() {
            const industry = selectedIndustry || detectFromImage();

            document.getElementById('btn-analyze').style.display = 'none';
            document.getElementById('loading').style.display = 'block';
            document.getElementById('result').style.display = 'none';

            // ì‹¤ì œ Teachable Machine ëª¨ë¸ì´ ìˆìœ¼ë©´ ì‚¬ìš©
            if (MODEL_URL && imageSelected) {
                await runTeachableMachine();
            } else {
                await runSimulation(industry);
            }
        }

        // â”€â”€ ì‹¤ì œ Teachable Machine ì—°ë™ â”€â”€
        async function runTeachableMachine() {
            try {
                if (!tmModel) {
                    tmModel = await tmImage.load(MODEL_URL + 'model.json', MODEL_URL + 'metadata.json');
                }
                const img = document.getElementById('preview-img');
                const predictions = await tmModel.predict(img);
                const best = predictions.reduce((a, b) => a.probability > b.probability ? a : b);

                // í´ë˜ìŠ¤ëª… â†’ ì—…ì¢… í‚¤ ë§¤í•‘ (ëª¨ë¸ í´ë˜ìŠ¤ëª…ì— ë§ê²Œ ìˆ˜ì •í•˜ì„¸ìš”)
                const classMap = { 'ìš”ì‹ì—…': 'restaurant', 'ì˜ë£Œ': 'medical', 'í˜¸í…”': 'hotel', 'ë¬¼ë¥˜': 'logistics' };
                const industry = classMap[best.className] || 'restaurant';
                showResult(industry, Math.round(best.probability * 100));
            } catch (e) {
                await runSimulation(selectedIndustry || 'restaurant');
            }
        }

        // â”€â”€ ë°ëª¨ ì‹œë®¬ë ˆì´ì…˜ â”€â”€
        async function runSimulation(industry) {
            const steps = ['step1', 'step2', 'step3', 'step4'];
            for (let i = 0; i < steps.length; i++) {
                if (i > 0) document.getElementById(steps[i - 1]).classList.remove('active');
                document.getElementById(steps[i]).classList.add('active');
                await delay(600 + Math.random() * 400);
                document.getElementById(steps[i]).classList.remove('active');
                document.getElementById(steps[i]).classList.add('done');
            }
            await delay(300);

            const key = industry || randomIndustry();
            const rec = RECOMMENDATIONS[key];
            showResult(key, rec.confidence);
        }

        function showResult(industryKey, confidence) {
            document.getElementById('loading').style.display = 'none';
            const rec = RECOMMENDATIONS[industryKey];
            document.getElementById('result-label').textContent = rec.label;
            document.getElementById('result-conf').textContent = `ì‹ ë¢°ë„ ${confidence}%`;
            setTimeout(() => {
                document.getElementById('conf-bar').style.width = confidence + '%';
            }, 100);

            // ì¶”ì²œ ì¹´ë“œ
            const cards = document.getElementById('rec-cards');
            cards.innerHTML = `
        <div class="rec-card">
          <div class="rec-header">
            <span class="rec-icon">âœ¨</span>
            <h3>${rec.label} ë§ì¶¤ ìœ ë‹ˆí¼ ì¶”ì²œ</h3>
          </div>
          <div class="rec-body">
            ${rec.items.map(item => `
              <div class="rec-item">
                <label>${item.label}</label>
                <span>${item.value}</span>
                ${item.colors ? `<div class="color-dots">${item.colors.map(c => `<div class="color-dot" style="background:${c}"></div>`).join('')}</div>` : ''}
              </div>
            `).join('')}
          </div>
        </div>
      `;

            // Formspree ìë™ ë©”ì‹œì§€
            document.getElementById('hidden-rec').value = rec.label;
            document.getElementById('auto-message').value = `AI ì¶”ì²œ ì—…ì¢…: ${rec.label}\nì‹ ë¢°ë„: ${confidence}%\n\nì¶”ì²œ ìŠ¤íƒ€ì¼ë¡œ ê²¬ì ì„ ë°›ê³  ì‹¶ìŠµë‹ˆë‹¤.`;
            document.getElementById('cta-desc').textContent = `${rec.label} ë§ì¶¤ ìœ ë‹ˆí¼ ê²¬ì ì„ ì¦‰ì‹œ ìš”ì²­í•©ë‹ˆë‹¤.`;

            document.getElementById('result').style.display = 'block';
        }

        function resetAll() {
            selectedIndustry = null; imageSelected = false;
            document.getElementById('result').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('preview-wrap').style.display = 'none';
            document.getElementById('btn-analyze').classList.remove('visible');
            dropZone.style.display = 'block';
            document.querySelector('.divider').style.display = 'flex';
            document.querySelector('.quick-label').style.display = 'block';
            document.querySelector('.quick-grid').style.display = 'grid';
            document.querySelectorAll('.quick-btn').forEach(b => b.classList.remove('active'));
            ['step1', 'step2', 'step3', 'step4'].forEach(id => {
                document.getElementById(id).classList.remove('active', 'done');
            });
            document.getElementById('conf-bar').style.width = '0%';
            fileInput.value = '';
        }

        function randomIndustry() {
            const keys = Object.keys(RECOMMENDATIONS);
            return keys[Math.floor(Math.random() * keys.length)];
        }

        function detectFromImage() { return randomIndustry(); }
        function delay(ms) { return new Promise(r => setTimeout(r, ms)); }
    </script>
</body>

</html>